<div
  <% if wrapper_css_class %>class="<%= wrapper_css_class %>"<% end %>
  <% if wrapper_data %><%= wrapper_data_html_attribute %><% end %>
  <% if html_attributes %><%= tag.attributes(**html_attributes) %><% end %>
>
  <% if radio? || checkbox? %>
    <div class="relative flex items-center gap-3">
      <% if only_label %>
        <div class="hidden">
          <%= render_input class: invalid? ? invalid_css_classes : valid_css_classes, disabled: disabled, readonly: readonly, checked: checked, data: data %>
        </div>
      <% else %>
        <div class="!w-4 !m-w-4 grid flex-none ">
          <% if form.blank? && checkbox? %><input name="<%= attribute_name %>" type="hidden" autocomplete="off"><% end %>
          <%= render_input class: invalid? ? invalid_css_classes : valid_css_classes, disabled: disabled, readonly: readonly, checked: checked, data: data %>
        </div>
      <% end %>
      <% unless without_label %>
        <div class="grow">
          <%= render_label %>
          <% if required %><abbr title="required">*</abbr><% end %>
          <% if caption %><p class="text-secondary text-sm"><%= caption %></p><% end %>
        </div>
      <% end %>
    </div>
  <% else %>
    <% unless without_label %>
      <div class="flex">
        <%= render_label %>
        <% if required %><abbr title="required">*</abbr><% end %>
      </div>
    <% end %>

    <div class="relative <%= class_names('mt-1' => !without_label, 'trix-editor' => action_text?) %>">
      <%= render_input required: required, class: invalid? ? invalid_css_classes : valid_css_classes, disabled: disabled, readonly: readonly, placeholder: placeholder, data: data, autocomplete: 'off' %>

      <% if invalid? %>
        <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3">
          <%== svg_icon('svg/exclamation', class: 'h-5 w-5 text-red-500') %>
        </div>
      <% end %>
    </div>
    
    <% if caption.present? %>
      <p class="mt-1 text-sm text-secondary"><%== caption %></p>
    <% end %>

    <% if invalid? %>
      <p class="mt-1 text-xs text-red-600"><%= error_messages %></p>
    <% end %>
  <% end %>
</div>
